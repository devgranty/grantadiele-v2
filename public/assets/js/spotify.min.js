const getAuthToken=async()=>{const e=btoa("5df897a3a6e044d4b89069aefdab67fe:3e0f13fffeb44b16a4e6681baaa3c2a1");var t=new URLSearchParams;t.append("grant_type","refresh_token"),t.append("refresh_token","AQBQUBltqc7Eq5cHCZmWAaAGH1mtPuK9cK8IVLY1CxlrMqUcx-oRhg4xNLwqOLBB76Vy0md3YqTGyxw9BycwP4FQahJtYR9OARUcD6KSekCMbvVQFjO-Lr8WxnjQvA-tNNM");return(await axios({url:"https://accounts.spotify.com/api/token",method:"POST",headers:{Authorization:`Basic ${e}`,"Content-Type":"application/x-www-form-urlencoded"},data:t})).data.access_token},getCurrentTrack=async e=>{const t=document.getElementById("songState"),a=document.getElementById("songName"),n=document.getElementById("songArtist"),r=await axios({url:"https://api.spotify.com/v1/me/player/currently-playing",method:"GET",headers:{Authorization:`Bearer ${e}`}});if(r.data.item){a.innerText=r.data.item.name;let e=[];r.data.item.artists.forEach((t=>{e.push(t.name)})),n.innerText=e.join(", "),a.setAttribute("href",r.data.item.external_urls.spotify)}else{let r=(await axios({url:"https://api.spotify.com/v1/me/player/recently-played?limit=1",method:"GET",headers:{Authorization:`Bearer ${e}`}})).data.items[0].track;t.innerText="Last listened",a.innerText=r.name;let o=[];r.artists.forEach((e=>{o.push(e.name)})),n.innerText=o.join(", "),a.setAttribute("href",r.external_urls.spotify)}};getAuthToken().then((e=>getCurrentTrack(e)));